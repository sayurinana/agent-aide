@startuml spec-03-task
!theme plain
title 子计划3: README 命令实现 - 任务执行流程图

start

partition "3.1 添加配置项" {
    :在 DEFAULT_CONFIG 中添加\nuser_docs.readme_path;
    :添加 user_docs.rules_path;
    :测试 aide config get 命令;
}

partition "3.2 创建命令文件" {
    :创建 commands/readme.md;

    partition "编写规范引导流程" {
        :检查 make-readme-rules.md 是否存在;
        if (存在?) then (是)
            :进入 README 生成流程;
        else (否)
            :提示先完成 docs+load;
            :建议独立对话专注规范制定;
            :触发 readme-templates skill;
            :介绍可用模板和模块;
            :引导用户选择;
            :生成规范文件;
        endif
    }

    partition "编写 README 生成流程" {
        :读取规范文件;
        :检查 README.md 是否存在;
        note right: 存在则直接覆盖
        :触发 readme-templates skill;
        :根据规范和项目文档生成;
        :写入 README.md;
    }
}

partition "3.3 验证" {
    :测试规范引导流程;
    :测试 README 生成流程;
    :测试已存在 README 时的覆盖行为;
}

stop

@enduml
