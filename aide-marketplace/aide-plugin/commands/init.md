---
description: 项目认知与环境初始化。进入新项目或开始工作前使用，触发对项目的主动认知和环境检测修复。
argument-hint: [无参数]
---

# Aide 初始化

你正在使用 Aide 工作流体系。本命令帮助你快速认知项目并确保环境就绪。

---

## 核心约束（必须遵守）

**禁止直接读取或编辑 `.aide/` 目录下的任何文件！**

- ❌ 禁止使用 Read 工具读取 `.aide/config.toml`
- ❌ 禁止使用 Edit/Write 工具修改 `.aide/` 下的文件
- ✅ 必须通过 `aide config get/set` 读写配置
- ✅ 必须通过 `aide env set` 修改环境配置
- ✅ 配置有误时，触发 `env-config` skill 学习正确的设置方法

**原因**：`.aide/` 是 aide 程序的内部数据目录，直接操作可能导致格式错误或状态不一致。

---

## 执行步骤

### 1. Aide 运行时环境检测

首先确保 aide 程序本身可以正常运行：

```bash
aide env ensure --runtime
```

根据输出处理：
- `✓`：aide 运行时就绪，继续
- `✗`：按提示修复后重试，无法修复则告知用户

> **重要**：`--runtime` 参数表示仅检查 aide 自身运行环境，不依赖项目配置文件

### 2. Aide 数据目录初始化

```bash
aide init
```

此命令会：
- 创建 `.aide/` 目录（如不存在）
- 生成默认配置文件
- 检查并更新 `.gitignore`

### 3. 项目认知

快速建立对项目的整体理解：

1. 阅读项目根目录的 `README.md`（如存在）
2. 阅读 `CLAUDE.md`（如存在）
3. 浏览项目目录结构，理解核心模块划分
4. 识别项目类型和主要技术栈

向用户简要汇报项目概况（3-5句话）。

### 4. 项目环境检测

```bash
aide env ensure
```

根据输出处理：
- `✓`：环境就绪，**直接进入步骤 5**（不要再查看配置文件）
- `⚠`：有警告但可继续，记录警告信息并继续
- `✗`：**触发 `env-config` skill**，学习如何使用 `aide env set` 命令修复配置，然后重试

**环境检测失败时的正确做法**：
1. 触发 `env-config` skill 获取配置指导
2. 使用 `aide env set <模块>.<配置项> <值>` 修改配置
3. 重新执行 `aide env ensure` 验证

**错误做法**（禁止）：
- 直接编辑 `.aide/config.toml` 文件

### 5. 汇报就绪状态

环境检测通过后，直接向用户汇报（不要再读取配置文件）：

```
项目概况：[来自步骤3的概要]

环境状态：[aide env ensure 的输出结果]

Aide 已就绪，可用命令：
- /aide:prep [文档路径] - 任务准备
- /aide:exec [文档路径] - 任务执行
```

> 注：任务文档路径等配置信息已在 aide env ensure 输出中显示，无需额外查看配置文件。

---

## 注意事项

1. **不要读取 `.aide/` 目录下的文件**——所有配置操作通过 aide 命令完成
2. 如果在初始化过程中发现严重环境问题无法解决，建议用户修复后重开对话
3. 本命令只做认知和环境准备，不修改任何业务代码
4. 所有输出使用简体中文
