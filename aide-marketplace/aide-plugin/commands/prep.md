---
description: 任务准备流程。分析用户任务描述，优化表述，处理待定项，产出可执行的任务细则。
argument-hint: [任务原文档路径]
---

# Aide 任务准备

你正在执行 Aide 任务准备流程。将任务描述转化为清晰、可执行的任务细则。

## 参数

- `$ARGUMENTS`：任务原文档路径（可选）
- 未传入时使用配置中的默认路径

---

## 开始

### 确定任务文档

```bash
# 如果传入了参数
任务文档 = $ARGUMENTS

# 如果未传入参数，使用配置默认值
aide config get task.source
```

读取任务文档内容。如文档不存在，询问用户提供任务内容或指定文档路径。

### 启动流程追踪

```bash
aide flow start task-optimize "开始任务准备: <任务简述>"
```

---

## 阶段 1：任务分析

### 深度理解任务

- 任务要解决什么问题？
- 最终交付物是什么？
- 成功的标准是什么？
- 涉及哪些模块/系统？
- 是否有技术难点？

### 分析项目环境

根据需要阅读相关代码/文档，理解任务与项目现有结构的关系。

> 复杂任务（多子目标、多方案对比）建议使用 sequential-thinking 进行结构化分析

### 记录进度

```bash
aide flow next-step "任务分析完成"
```

---

## 阶段 2：任务优化

### 准确性优化

- 识别**歧义**和**不明确之处**
- 识别**隐含假设**和**未说明的前提**
- 明确任务**边界**

### 简洁性优化

- 识别**冗余表述**
- 区分**真冗余**与**必要强调**

### 可执行性优化

- 将抽象要求转化为**具体步骤**
- 确保每个步骤有明确的**输入、输出、验证标准**
- 识别可能的**替代方案**

### 生成待定项

对于存在多种方案、有歧义、需要用户确认的内容，准备待定项数据。

### 记录进度

```bash
aide flow next-step "任务优化完成，生成待定项"
```

---

## 阶段 3：待定项处理

### 有待定项时

提交待定项数据：

```bash
aide decide '<json数据>'
```

告知用户访问链接进行确认。

用户完成后获取结果：

```bash
aide decide result
```

### 记录进度

```bash
aide flow next-step "用户完成待定项确认"
```

### 无待定项时

任务描述已足够清晰，直接进入下一阶段。

---

## 阶段 4：结果生成

### 生成任务细则

整合原始描述、优化结果、用户决策，产出任务细则：

```markdown
# 任务细则

## 任务目标
[清晰描述任务要达成的目标]

## 成功标准
[明确的、可验证的成功标准]

## 执行步骤
1. [步骤1]
2. [步骤2]
...

## 技术决策
[已确认的技术选型]

## 约束与边界
[任务范围边界]
```

### 记录进度

```bash
aide flow next-step "生成任务细则，等待用户确认"
```

### 用户确认

向用户展示任务细则，询问确认：
- **确认**：保存到任务细则文档
- **需修改**：根据反馈调整

```bash
aide flow next-step "用户确认任务细则"
```

---

## 完成

任务准备完成，任务细则已保存。

提示用户：
```
任务细则已保存到 task-spec.md

可执行 /aide:exec 开始任务执行
```

---

## 处理问题

遇到问题时：

```bash
# 一般问题
aide flow issue "<问题描述>"

# 严重错误
aide flow error "<错误描述>"
```

需要回退时：

```bash
aide flow back-step "<原因>"
```
